{
  "title": "Contract: input-seeded wildcard output",
  "description": "Uses a typed input signature with wildcard output to infer precise output fields from static input paths while keeping dynamic access conservative.",
  "program": [
    "TRANSFORM Normalize(input: { payload?: { name: text }, metrics: { count: number }, key: text }) -> _ {",
    "    LET payload = input.payload;",
    "    LET fallbackName = IF payload != NULL THEN payload.name ELSE \"none\";",
    "    LET count = GET(input.metrics, \"count\", 0);",
    "    OUTPUT {",
    "        name: fallbackName,",
    "        count: count,",
    "        dynamic: input.metrics[input.key]",
    "    }",
    "}"
  ],
  "input": {
    "payload": {
      "name": "Eugene"
    },
    "metrics": {
      "count": 4,
      "extra": "9"
    },
    "key": "extra"
  }
}
