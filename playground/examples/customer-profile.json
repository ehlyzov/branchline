{
  "title": "Customer profile enrichment",
  "description": "Build a normalized customer profile with FORMAT/GET helpers and a CASE-backed loyalty fallback.",
  "showContracts": true,
  "program": [
    "OUTPUT {",
    "    id: input.id,",
    "    full_name: FORMAT(\"{0} {1}\", [input.first_name, input.last_name]),",
    "    loyalty_tier: CASE {",
    "        WHEN input.loyalty_tier == NULL THEN \"standard\"",
    "        ELSE input.loyalty_tier",
    "    },",
    "    shipping_city: GET(input.address, \"city\", \"unknown\")",
    "}"
  ],
  "input": {
    "id": 42,
    "first_name": "Ada",
    "last_name": "Lovelace",
    "loyalty_tier": null,
    "address": {
      "city": "London"
    }
  }
}
